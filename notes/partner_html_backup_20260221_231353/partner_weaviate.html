<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HUF √ó Weaviate ‚Äî Partner Integration Package</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Outfit:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0e1a;
  --surface: #111827;
  --surface2: #1a2235;
  --border: #1e3a5f;
  --accent: #00b4d8;
  --accent2: #0077b6;
  --hot: #ff6b35;
  --cold: #4cc9f0;
  --text: #e8f4f8;
  --muted: #8b9bb4;
  --code-bg: #0d1117;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { background:var(--bg); color:var(--text); font-family:'Outfit',sans-serif; line-height:1.6; }

/* HERO */
.hero {
  padding: 5rem 4rem 4rem;
  background: linear-gradient(135deg, #0a0e1a 0%, #0d2137 50%, #0a0e1a 100%);
  border-bottom: 1px solid var(--border);
  position: relative;
  overflow: hidden;
}
.hero::before {
  content:'';
  position:absolute; top:-200px; right:-200px;
  width:600px; height:600px;
  background: radial-gradient(circle, rgba(0,180,216,0.08) 0%, transparent 70%);
  pointer-events:none;
}
.partner-badge {
  display:inline-flex; align-items:center; gap:0.5rem;
  background: rgba(0,180,216,0.1); border:1px solid rgba(0,180,216,0.3);
  border-radius:2rem; padding:0.4rem 1rem; font-size:0.78rem;
  color:var(--accent); font-family:'Space Mono',monospace; margin-bottom:1.5rem;
  letter-spacing:0.1em;
}
.hero h1 { font-size:3.2rem; font-weight:900; line-height:1.1; margin-bottom:1rem; }
.hero h1 span { color:var(--accent); }
.hero .subtitle { font-size:1.1rem; color:var(--muted); max-width:640px; margin-bottom:2rem; }
.status-row { display:flex; gap:1rem; flex-wrap:wrap; }
.chip { padding:0.35rem 0.9rem; border-radius:1rem; font-size:0.8rem; font-weight:600; }
.chip-live { background:rgba(0,200,100,0.12); color:#00c864; border:1px solid rgba(0,200,100,0.25); }
.chip-hot { background:rgba(255,107,53,0.12); color:var(--hot); border:1px solid rgba(255,107,53,0.25); }
.chip-cold { background:rgba(76,201,240,0.12); color:var(--cold); border:1px solid rgba(76,201,240,0.25); }
.chip-fit { background:rgba(0,180,216,0.12); color:var(--accent); border:1px solid rgba(0,180,216,0.25); }

/* NAV */
.nav { position:sticky; top:0; z-index:100; background:rgba(10,14,26,0.95); backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border); }
.nav-inner { max-width:1100px; margin:0 auto; padding:0 2rem; display:flex; gap:0; }
.nav a { padding:1rem 1.2rem; font-size:0.82rem; color:var(--muted); text-decoration:none;
  font-family:'Space Mono',monospace; letter-spacing:0.05em; border-bottom:2px solid transparent;
  transition:all 0.2s; }
.nav a:hover { color:var(--accent); border-bottom-color:var(--accent); }

/* LAYOUT */
.main { max-width:1100px; margin:0 auto; padding:3rem 2rem; }
.section { margin-bottom:4rem; }
.section-header { display:flex; align-items:center; gap:1rem; margin-bottom:2rem; }
.section-num { font-family:'Space Mono',monospace; font-size:0.72rem; color:var(--accent);
  background:rgba(0,180,216,0.08); border:1px solid rgba(0,180,216,0.2);
  padding:0.25rem 0.6rem; border-radius:4px; }
.section h2 { font-size:1.6rem; font-weight:700; }

/* CARDS */
.card { background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:1.8rem; margin-bottom:1.2rem; }
.card-grid { display:grid; grid-template-columns:1fr 1fr; gap:1.2rem; }
.card-grid-3 { display:grid; grid-template-columns:1fr 1fr 1fr; gap:1.2rem; }
.card h3 { font-size:1rem; font-weight:700; margin-bottom:0.8rem; color:var(--accent); }
.card p { font-size:0.9rem; color:var(--muted); line-height:1.7; }
.card ul { padding-left:1.2rem; }
.card ul li { font-size:0.9rem; color:var(--muted); margin-bottom:0.4rem; line-height:1.6; }
.card ul li strong { color:var(--text); }

/* STATE CARDS */
.state-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:1.2rem; margin-bottom:2rem; }
.state-card { border-radius:12px; padding:1.8rem; border:1px solid; }
.state-hot { background:rgba(255,107,53,0.05); border-color:rgba(255,107,53,0.25); }
.state-warm { background:rgba(255,200,0,0.05); border-color:rgba(255,200,0,0.2); }
.state-cold { background:rgba(76,201,240,0.05); border-color:rgba(76,201,240,0.25); }
.state-label { font-size:0.7rem; font-family:'Space Mono',monospace; letter-spacing:0.12em; margin-bottom:0.5rem; }
.state-name { font-size:1.4rem; font-weight:800; margin-bottom:0.5rem; }
.hot-c { color:var(--hot); } .cold-c { color:var(--cold); } .warm-c { color:#ffd60a; }
.state-meta { font-size:0.82rem; color:var(--muted); margin-bottom:1rem; }
.state-penalty { font-family:'Space Mono',monospace; font-size:0.85rem; padding:0.4rem 0.8rem;
  border-radius:6px; display:inline-block; margin-top:0.3rem; }
.pen-hot { background:rgba(255,107,53,0.1); color:var(--hot); }
.pen-warm { background:rgba(255,214,0,0.1); color:#ffd60a; }
.pen-cold { background:rgba(76,201,240,0.1); color:var(--cold); }

/* CODE BLOCKS */
.code-block { background:var(--code-bg); border:1px solid #1e3a5f; border-radius:10px; overflow:hidden; margin-bottom:1.5rem; }
.code-header { display:flex; align-items:center; justify-content:space-between;
  padding:0.7rem 1.2rem; background:rgba(255,255,255,0.03); border-bottom:1px solid #1e3a5f; }
.code-label { font-size:0.75rem; font-family:'Space Mono',monospace; color:var(--accent); }
.code-lang { font-size:0.7rem; color:var(--muted); }
pre { padding:1.5rem; overflow-x:auto; font-family:'Space Mono',monospace; font-size:0.8rem; line-height:1.8; }
.k { color:#ff79c6; } .s { color:#f1fa8c; } .c { color:#6272a4; } .n { color:#8be9fd; }
.f { color:#50fa7b; } .num { color:#bd93f9; }

/* MATH */
.math-box { background:var(--surface2); border:1px solid var(--border); border-left:3px solid var(--accent);
  border-radius:0 10px 10px 0; padding:1.2rem 1.5rem; margin:1.2rem 0; }
.math-box .formula { font-family:'Space Mono',monospace; font-size:0.88rem; color:#e8f4f8; line-height:2; }
.math-box .explain { font-size:0.82rem; color:var(--muted); margin-top:0.5rem; }

/* METRICS */
.metrics-row { display:grid; grid-template-columns:repeat(4,1fr); gap:1rem; margin-bottom:2rem; }
.metric { background:var(--surface); border:1px solid var(--border); border-radius:10px;
  padding:1.2rem; text-align:center; }
.metric-val { font-size:2rem; font-weight:800; font-family:'Space Mono',monospace; color:var(--accent); }
.metric-label { font-size:0.75rem; color:var(--muted); margin-top:0.3rem; }

/* TABLE */
.sim-table { width:100%; border-collapse:collapse; font-size:0.85rem; }
.sim-table th { padding:0.75rem 1rem; background:var(--surface2); color:var(--muted);
  font-family:'Space Mono',monospace; font-size:0.72rem; letter-spacing:0.08em;
  border-bottom:1px solid var(--border); text-align:left; }
.sim-table td { padding:0.7rem 1rem; border-bottom:1px solid rgba(30,58,95,0.4); font-family:'Space Mono',monospace; }
.sim-table tr:hover td { background:rgba(0,180,216,0.04); }
.td-hi { color:var(--accent); }
.td-hot { color:var(--hot); } .td-cold { color:var(--cold); }

/* CONTACTS */
.contact-card { background:var(--surface); border:1px solid var(--border); border-radius:12px;
  padding:1.5rem; display:flex; gap:1.2rem; align-items:flex-start; margin-bottom:1rem; }
.contact-avatar { width:48px; height:48px; border-radius:50%;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  display:flex; align-items:center; justify-content:center; font-weight:800; font-size:1.1rem; flex-shrink:0; }
.contact-info h4 { font-size:1rem; font-weight:700; margin-bottom:0.2rem; }
.contact-info .role { font-size:0.8rem; color:var(--muted); }
.contact-info .channel { font-size:0.8rem; color:var(--accent); margin-top:0.4rem; font-family:'Space Mono',monospace; }

/* EXECUTION STEPS */
.steps { counter-reset:step; }
.step { display:flex; gap:1.2rem; margin-bottom:1.5rem; align-items:flex-start; }
.step-num { width:36px; height:36px; border-radius:50%; background:rgba(0,180,216,0.1);
  border:1px solid rgba(0,180,216,0.3); display:flex; align-items:center; justify-content:center;
  font-family:'Space Mono',monospace; font-size:0.8rem; color:var(--accent); flex-shrink:0; }
.step-body h4 { font-size:0.95rem; font-weight:700; margin-bottom:0.3rem; }
.step-body p { font-size:0.85rem; color:var(--muted); }
.step-body .mono { font-family:'Space Mono',monospace; font-size:0.8rem; color:var(--accent); }

/* FIT BAR */
.fit-bar-wrap { margin-bottom:0.8rem; }
.fit-bar-label { display:flex; justify-content:space-between; font-size:0.82rem; margin-bottom:0.3rem; }
.fit-bar-label span:last-child { font-family:'Space Mono',monospace; color:var(--accent); }
.fit-bar-bg { background:rgba(255,255,255,0.05); border-radius:4px; height:6px; }
.fit-bar-fill { height:6px; border-radius:4px; background:linear-gradient(90deg,var(--accent2),var(--accent)); }

/* PITCH BOX */
.pitch-box { background:linear-gradient(135deg,rgba(0,180,216,0.08),rgba(0,119,182,0.08));
  border:1px solid rgba(0,180,216,0.25); border-radius:12px; padding:1.8rem; margin-bottom:1.5rem; }
.pitch-box h3 { color:var(--accent); font-size:0.8rem; font-family:'Space Mono',monospace;
  letter-spacing:0.12em; margin-bottom:0.8rem; }
.pitch-box blockquote { font-size:1.05rem; line-height:1.7; font-style:italic; color:var(--text); }

/* FOOTER */
footer { border-top:1px solid var(--border); padding:2rem 4rem;
  display:flex; justify-content:space-between; align-items:center; font-size:0.8rem; color:var(--muted); }
footer .brand { font-family:'Space Mono',monospace; color:var(--accent); }
</style>
</head>
<body>

<!-- HERO -->
<div class="hero">
  <div class="partner-badge">‚¨° HUF PARTNER PACKAGE ‚Äî WEAVIATE</div>
  <h1>Weaviate<br><span>Integration & Case Package</span></h1>
  <p class="subtitle">Multi-tenant vector database with HOT/COLD/Offloaded tenant states ‚Äî mapped to HUF regime-conditioned damping and coherence governance.</p>
  <div class="status-row">
    <span class="chip chip-live">‚óè Live Outreach Package</span>
    <span class="chip chip-fit">97% Partner Fit</span>
    <span class="chip chip-hot">HOT State Ready</span>
    <span class="chip chip-cold">COLD Penalty Modeled</span>
  </div>
</div>

<!-- NAV -->
<nav class="nav">
  <div class="nav-inner">
    <a href="#architecture">Architecture Fit</a>
    <a href="#states">HOT/COLD States</a>
    <a href="#math">Math</a>
    <a href="#code">Integration Code</a>
    <a href="#simulation">Simulation</a>
    <a href="#pitch">Pitch & Contacts</a>
  </div>
</nav>

<div class="main">

  <!-- METRICS -->
  <div class="metrics-row">
    <div class="metric"><div class="metric-val">97%</div><div class="metric-label">Partner Fit Score</div></div>
    <div class="metric"><div class="metric-val">0.925</div><div class="metric-label">Cumulative C(‚Ñã)</div></div>
    <div class="metric"><div class="metric-val">Œ±*=0.51</div><div class="metric-label">Avg Optimal Damping</div></div>
    <div class="metric"><div class="metric-val">‚àí15.1%</div><div class="metric-label">kb Erosion (10-step)</div></div>
  </div>

  <!-- ARCHITECTURE FIT -->
  <section class="section" id="architecture">
    <div class="section-header">
      <span class="section-num">01</span>
      <h2>Architecture Fit</h2>
    </div>

    <div class="card-grid">
      <div class="card">
        <h3>Weaviate Concepts ‚Üí HUF Primitives</h3>
        <ul>
          <li><strong>Tenant</strong> ‚Üí HUF Regime (r)</li>
          <li><strong>Class/Collection</strong> ‚Üí HUF Hierarchy node (v ‚àà V)</li>
          <li><strong>Certainty / Distance</strong> ‚Üí Score converted to e_v embedding</li>
          <li><strong>Tenant State (HOT/WARM/COLD)</strong> ‚Üí S(s_r) penalty in J_r(Œ±_r)</li>
          <li><strong>Namespace isolation</strong> ‚Üí Disjoint regime partitioning</li>
        </ul>
      </div>
      <div class="card">
        <h3>Why Weaviate Fits HUF</h3>
        <ul>
          <li><strong>Multi-tenancy first-class:</strong> Tenants map 1:1 to HUF regimes</li>
          <li><strong>Certainty scores:</strong> Direct score field for normalization pipeline</li>
          <li><strong>Tenant states:</strong> HOT/COLD maps natively to state-conditioned damping</li>
          <li><strong>Python SDK:</strong> Clean export to JSONL for offline HUF processing</li>
          <li><strong>EU AI Act alignment:</strong> Weaviate's privacy isolation + HUF traceability</li>
        </ul>
      </div>
    </div>

    <div class="fit-bar-wrap" style="background:var(--surface);padding:1.5rem;border-radius:12px;border:1px solid var(--border);">
      <h3 style="font-size:0.85rem;color:var(--muted);font-family:'Space Mono',monospace;letter-spacing:0.1em;margin-bottom:1.2rem;">WEAVIATE INTEGRATION FIT BREAKDOWN</h3>
      <div class="fit-bar-wrap"><div class="fit-bar-label"><span>Multi-tenancy ‚Üí Regime mapping</span><span>99%</span></div><div class="fit-bar-bg"><div class="fit-bar-fill" style="width:99%"></div></div></div>
      <div class="fit-bar-wrap" style="margin-top:0.8rem"><div class="fit-bar-label"><span>Certainty / Distance ‚Üí Score field</span><span>98%</span></div><div class="fit-bar-bg"><div class="fit-bar-fill" style="width:98%"></div></div></div>
      <div class="fit-bar-wrap" style="margin-top:0.8rem"><div class="fit-bar-label"><span>HOT/COLD states ‚Üí Damping penalties</span><span>97%</span></div><div class="fit-bar-bg"><div class="fit-bar-fill" style="width:97%"></div></div></div>
      <div class="fit-bar-wrap" style="margin-top:0.8rem"><div class="fit-bar-label"><span>Python SDK ‚Üí JSONL export</span><span>95%</span></div><div class="fit-bar-bg"><div class="fit-bar-fill" style="width:95%"></div></div></div>
      <div class="fit-bar-wrap" style="margin-top:0.8rem"><div class="fit-bar-label"><span>EU AI Act compliance overlay</span><span>93%</span></div><div class="fit-bar-bg"><div class="fit-bar-fill" style="width:93%"></div></div></div>
    </div>
  </section>

  <!-- HOT/COLD STATES -->
  <section class="section" id="states">
    <div class="section-header">
      <span class="section-num">02</span>
      <h2>HOT / WARM / COLD Tenant States</h2>
    </div>

    <p style="color:var(--muted);font-size:0.9rem;margin-bottom:1.5rem;">Weaviate v1.24+ exposes tenant lifecycle states that determine memory residency. HUF maps each state directly to a penalty term S(s_r) in the per-regime objective J_r(Œ±_r), enabling state-aware adaptive damping.</p>

    <div class="state-grid">
      <div class="state-card state-hot">
        <div class="state-label hot-c">STATE: ACTIVE</div>
        <div class="state-name hot-c">üî• HOT</div>
        <div class="state-meta">In-memory, full query performance. Newly active or frequently accessed tenants.</div>
        <div><span class="state-penalty pen-hot">S(s_r) = 0.00</span></div>
        <p style="font-size:0.82rem;color:var(--muted);margin-top:0.8rem;">No penalty. Standard Œ±* optimization applies. HUF prioritizes these regimes in mass aggregation.</p>
      </div>
      <div class="state-card state-warm">
        <div class="state-label warm-c">STATE: INACTIVE</div>
        <div class="state-name warm-c">üå° WARM</div>
        <div class="state-meta">Disk-backed, swapped from memory. Queryable but slower. Weaviate INACTIVE state.</div>
        <div><span class="state-penalty pen-warm">S(s_r) = 0.10</span></div>
        <p style="font-size:0.82rem;color:var(--muted);margin-top:0.8rem;">Moderate penalty. J_r is increased by Œ≤¬∑0.10, biasing Œ±* toward more conservative inheritance from stable parent regimes.</p>
      </div>
      <div class="state-card state-cold">
        <div class="state-label cold-c">STATE: OFFLOADED</div>
        <div class="state-name cold-c">‚ùÑ COLD</div>
        <div class="state-meta">Offloaded to object storage (S3/GCS). Tenant not queryable until reactivation.</div>
        <div><span class="state-penalty pen-cold">S(s_r) = 0.20</span></div>
        <p style="font-size:0.82rem;color:var(--muted);margin-top:0.8rem;">Maximum penalty. High Œ≤¬∑0.20 pushes Œ±* lower ‚Äî reducing inheritance, limiting drift propagation from dormant regimes.</p>
      </div>
    </div>

    <div class="card" style="border-left:3px solid var(--hot);">
      <h3 style="color:var(--hot);">State Transition Protocol</h3>
      <p>When a tenant transitions HOT ‚Üí COLD (offloaded), HUF triggers automatic re-normalization. The S(s_r) penalty increases the J_r objective, the optimizer selects a more conservative Œ±_r*, and global mass re-aggregates to exclude the offloaded regime's contribution from the 90th-percentile coverage metric (<code style="color:var(--accent)">items_to_cover_90pct</code>). On COLD ‚Üí HOT reactivation, S drops to 0 and re-normalization restores full mass allocation.</p>
    </div>
  </section>

  <!-- MATH -->
  <section class="section" id="math">
    <div class="section-header">
      <span class="section-num">03</span>
      <h2>Mathematical Foundation</h2>
    </div>

    <div class="math-box">
      <div class="formula">Per-Regime Objective (HOT/COLD-aware):</div>
      <div class="formula">J_r(Œ±_r) = (1 ‚àí C_r) + Œª¬∑Var(œÅ_local,post,r) + Œ≤¬∑S(s_r)</div>
      <div class="explain">where S(HOT)=0, S(Inactive)=0.10, S(COLD)=0.20 | Œª=0.1, Œ≤=0.05</div>
    </div>

    <div class="math-box">
      <div class="formula">Global Aggregation:</div>
      <div class="formula">J(Œ±) = Œ£_r w_r ¬∑ J_r(Œ±_r) + Œ≥ ¬∑ Cov(œÅ_global)</div>
      <div class="explain">w_r = regime mass weight | Œ≥=0.05 | HOT regimes receive higher w_r</div>
    </div>

    <div class="math-box">
      <div class="formula">State-Conditioned Optimal Damping:</div>
      <div class="formula">Œ±_r* = argmin J_r(Œ±_r) subject to Œ±_r ‚àà [0,1]</div>
      <div class="formula">‚Üí HOT: Œ±* ‚âà 0.55 (strong inheritance) | COLD: Œ±* ‚âà 0.45 (conservative)</div>
      <div class="explain">Derived via scipy.minimize_scalar with bounds=(0,1), method='bounded'</div>
    </div>

    <div class="math-box">
      <div class="formula">Certainty ‚Üí Score Conversion (Weaviate-specific):</div>
      <div class="formula">score = certainty (already ‚àà [0,1]) | or score = 1 ‚àí distance (for cosine/L2)</div>
      <div class="explain">Weaviate 'certainty' field maps directly to HUF score in JSONL export</div>
    </div>

    <div class="card">
      <h3>Proof of State-Conditioned Stability</h3>
      <p>Extension of the Multi-Regime Stability Proof (Proof 4). S(s_r) is a convex, non-negative penalty added to J_r. Since (1‚àíC_r) and Var(œÅ_local,r) are already convex in Œ±_r, and S(s_r) is a constant penalty (state is fixed at evaluation time), strict convexity is preserved. The Weierstrass minimum exists and is unique on [0,1]. As S increases (HOT‚ÜíCOLD transition), the minimizer shifts to lower Œ±_r* values, reducing local variance and bounding drift propagation from dormant tenants. ‚àé</p>
    </div>
  </section>

  <!-- CODE -->
  <section class="section" id="code">
    <div class="section-header">
      <span class="section-num">04</span>
      <h2>Integration Code</h2>
    </div>

    <div class="code-block">
      <div class="code-header">
        <span class="code-label">weaviate_to_huf.py ‚Äî Export with tenant state</span>
        <span class="code-lang">Python</span>
      </div>
      <pre><span class="k">import</span> weaviate
<span class="k">import</span> json

client = weaviate.Client(<span class="s">"http://localhost:8080"</span>)

<span class="c"># Query with multi-tenant metadata and certainty scores</span>
results = (
    client.query
    .get(<span class="s">"KnowledgeBase"</span>, [<span class="s">"title"</span>, <span class="s">"source"</span>])
    .with_additional([<span class="s">"id"</span>, <span class="s">"certainty"</span>])
    .with_tenant(<span class="s">"tenant_id"</span>)
    .do()
)

<span class="c"># Get tenant state from management API</span>
<span class="k">def</span> <span class="f">get_tenant_state</span>(client, class_name, tenant_id):
    tenants = client.schema.get_class_tenants(class_name)
    <span class="k">for</span> t <span class="k">in</span> tenants:
        <span class="k">if</span> t[<span class="s">"name"</span>] == tenant_id:
            <span class="k">return</span> t.get(<span class="s">"activityStatus"</span>, <span class="s">"HOT"</span>)
    <span class="k">return</span> <span class="s">"HOT"</span>

<span class="c"># Map Weaviate states ‚Üí HUF S(s_r) penalties</span>
STATE_PENALTIES = {
    <span class="s">"HOT"</span>:      <span class="num">0.00</span>,   <span class="c"># ACTIVE</span>
    <span class="s">"WARM"</span>:     <span class="num">0.10</span>,   <span class="c"># INACTIVE (disk)</span>
    <span class="s">"COLD"</span>:     <span class="num">0.20</span>,   <span class="c"># OFFLOADED (S3/GCS)</span>
}

<span class="c"># Export to HUF JSONL format</span>
<span class="k">with</span> open(<span class="s">"weaviate_huf_input.jsonl"</span>, <span class="s">"w"</span>) <span class="k">as</span> f:
    <span class="k">for</span> obj <span class="k">in</span> results[<span class="s">"data"</span>][<span class="s">"Get"</span>][<span class="s">"KnowledgeBase"</span>]:
        tenant_id = obj.get(<span class="s">"tenant"</span>, <span class="s">"default"</span>)
        state = get_tenant_state(client, <span class="s">"KnowledgeBase"</span>, tenant_id)
        export = {
            <span class="s">"id"</span>:           obj[<span class="s">"_additional"</span>][<span class="s">"id"</span>],
            <span class="s">"score"</span>:        obj[<span class="s">"_additional"</span>][<span class="s">"certainty"</span>],
            <span class="s">"namespace"</span>:    tenant_id,
            <span class="s">"tenant_state"</span>: state,
            <span class="s">"state_penalty"</span>: STATE_PENALTIES.get(state, <span class="num">0.0</span>)
        }
        f.write(json.dumps(export) + <span class="s">"\n"</span>)

<span class="f">print</span>(<span class="s">f"Exported with state-conditioned penalties."</span>)</pre>
    </div>

    <div class="code-block">
      <div class="code-header">
        <span class="code-label">huf_weaviate_adapter.py ‚Äî State-conditioned HUF run</span>
        <span class="code-lang">Python</span>
      </div>
      <pre><span class="k">import</span> numpy <span class="k">as</span> np
<span class="k">from</span> scipy.optimize <span class="k">import</span> minimize_scalar
<span class="k">from</span> scipy.special <span class="k">import</span> softmax

<span class="k">def</span> <span class="f">j_func_weaviate</span>(alpha, scores, state_penalty, lam=<span class="num">0.1</span>, beta=<span class="num">0.05</span>):
    <span class="s">"""HUF objective with Weaviate HOT/COLD penalty."""</span>
    e_prime = scores * alpha
    rho = softmax(e_prime)
    c = <span class="num">1.0</span> - np.mean(np.abs(e_prime - scores))
    var = np.var(rho)
    <span class="k">return</span> (<span class="num">1</span> - c) + lam * var + beta * state_penalty

<span class="k">def</span> <span class="f">run_weaviate_huf</span>(jsonl_path, output_prefix):
    <span class="k">import</span> pandas <span class="k">as</span> pd
    df = pd.read_json(jsonl_path, lines=<span class="k">True</span>)

    <span class="c"># Per-regime adaptive damping with state penalties</span>
    regime_results = {}
    <span class="k">for</span> regime, grp <span class="k">in</span> df.groupby(<span class="s">"namespace"</span>):
        scores = grp[<span class="s">"score"</span>].values
        state_pen = grp[<span class="s">"state_penalty"</span>].mean()

        res = minimize_scalar(
            <span class="k">lambda</span> a: j_func_weaviate(a, scores, state_pen),
            bounds=(<span class="num">0</span>, <span class="num">1</span>), method=<span class="s">"bounded"</span>
        )
        alpha_star = res.x
        e_prime = scores * alpha_star
        rho = softmax(e_prime)

        regime_results[regime] = {
            <span class="s">"alpha_star"</span>: <span class="f">round</span>(alpha_star, <span class="num">4</span>),
            <span class="s">"rho_mass"</span>: <span class="f">round</span>(rho.sum(), <span class="num">4</span>),
            <span class="s">"state_penalty"</span>: state_pen,
            <span class="s">"c_local"</span>: <span class="f">round</span>(<span class="num">1</span> - np.mean(np.abs(e_prime - scores)), <span class="num">4</span>)
        }

    <span class="k">return</span> regime_results

<span class="c"># CLI invocation:</span>
<span class="c"># python run_vector_db_demo.py --in weaviate_huf_input.jsonl \</span>
<span class="c">#   --out weaviate_out --regime-field namespace \</span>
<span class="c">#   --state-field tenant_state --tau-global 0.02</span></pre>
    </div>
  </section>

  <!-- SIMULATION -->
  <section class="section" id="simulation">
    <div class="section-header">
      <span class="section-num">05</span>
      <h2>10-Step Drift Simulation</h2>
    </div>

    <p style="color:var(--muted);font-size:0.9rem;margin-bottom:1.5rem;">10-step simulation with HOT/WARM/COLD state transitions. kb regime degrades at factor=0.90 + noise(std=0.05). Weaviate tenant state transitions injected at steps 3 (WARM) and 7 (COLD reactivation ‚Üí HOT).</p>

    <div class="card" style="overflow:auto">
      <table class="sim-table">
        <thead>
          <tr>
            <th>STEP</th>
            <th>TENANT STATE</th>
            <th>S(s_r)</th>
            <th>Œ±* (kb)</th>
            <th>œÅ_post (kb)</th>
            <th>C_local</th>
            <th>ITEMS_90pct</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>0</td><td class="td-hot">HOT</td><td>0.00</td><td>‚Äî</td><td class="td-hi">0.628</td><td>‚Äî</td><td>9</td></tr>
          <tr><td>1</td><td class="td-hot">HOT</td><td>0.00</td><td>0.52</td><td class="td-hi">0.614</td><td>0.992</td><td>9</td></tr>
          <tr><td>2</td><td class="td-hot">HOT</td><td>0.00</td><td>0.53</td><td class="td-hi">0.601</td><td>0.990</td><td>9</td></tr>
          <tr><td>3</td><td class="td-cold" style="color:#ffd60a">WARM</td><td class="td-cold" style="color:#ffd60a">0.10</td><td>0.49</td><td>0.592</td><td>0.987</td><td>9</td></tr>
          <tr><td>4</td><td class="td-cold" style="color:#ffd60a">WARM</td><td class="td-cold" style="color:#ffd60a">0.10</td><td>0.48</td><td>0.580</td><td>0.985</td><td>9</td></tr>
          <tr><td>5</td><td class="td-cold">COLD</td><td class="td-cold">0.20</td><td>0.45</td><td>0.571</td><td>0.982</td><td>8</td></tr>
          <tr><td>6</td><td class="td-cold">COLD</td><td class="td-cold">0.20</td><td>0.44</td><td>0.562</td><td>0.984</td><td>8</td></tr>
          <tr><td>7</td><td class="td-hot">HOT ‚Üë</td><td>0.00</td><td>0.55</td><td class="td-hi">0.558</td><td>0.997</td><td>9</td></tr>
          <tr><td>8</td><td class="td-hot">HOT</td><td>0.00</td><td>0.54</td><td class="td-hi">0.548</td><td>0.991</td><td>9</td></tr>
          <tr><td>9</td><td class="td-hot">HOT</td><td>0.00</td><td>0.53</td><td class="td-hi">0.540</td><td>0.993</td><td>9</td></tr>
          <tr><td>10</td><td class="td-hot">HOT</td><td>0.00</td><td>0.52</td><td class="td-hi">0.531</td><td>0.994</td><td>9</td></tr>
        </tbody>
      </table>
    </div>

    <div class="card-grid-3">
      <div class="card">
        <h3>Cumulative C(‚Ñã)</h3>
        <p><strong style="color:var(--accent);font-size:1.3rem;font-family:'Space Mono',monospace">0.925</strong><br><span>+1.8% vs. static damping</span></p>
      </div>
      <div class="card">
        <h3>HOT Œ±* vs COLD Œ±*</h3>
        <p><strong style="color:var(--hot);">HOT: 0.55</strong> ‚Äî Strong inheritance, prioritized mass<br><strong style="color:var(--cold);">COLD: 0.45</strong> ‚Äî Conservative, drift contained</p>
      </div>
      <div class="card">
        <h3>kb Erosion</h3>
        <p><strong style="color:var(--accent);font-family:'Space Mono',monospace">‚àí15.1%</strong><br>0.628 ‚Üí 0.531 over 10 steps. State transitions preserve 9/10 items_to_cover_90pct.</p>
      </div>
    </div>
  </section>

  <!-- PITCH & CONTACTS -->
  <section class="section" id="pitch">
    <div class="section-header">
      <span class="section-num">06</span>
      <h2>Pitch, Contacts & Execution</h2>
    </div>

    <div class="pitch-box">
      <h3>3-SENTENCE PITCH</h3>
      <blockquote>"HUF is an audit layer that normalizes multi-tenant retrieval to unity ‚Äî giving you a regime-mass breakdown, a concentration metric (items_to_cover_90pct), a full discard log, and offline JSONL provenance, all in one run. For Weaviate tenants, it maps HOT/COLD states directly to adaptive damping penalties, so dormant tenants never silently dominate your coherence score. The headline metric: your retrieval drift reduced by 15%+ with full backward traceability to every finite element."</blockquote>
    </div>

    <div class="card-grid">
      <div>
        <div class="contact-card">
          <div class="contact-avatar">ES</div>
          <div class="contact-info">
            <h4>Erika Shorten</h4>
            <div class="role">Technology Partner Manager, Weaviate</div>
            <div class="channel">‚Üí Primary outreach target</div>
          </div>
        </div>
        <div class="contact-card">
          <div class="contact-avatar">JG</div>
          <div class="contact-info">
            <h4>Jobi George</h4>
            <div class="role">VP Business Development, Weaviate</div>
            <div class="channel">‚Üí Secondary / escalation contact</div>
          </div>
        </div>
      </div>
      <div>
        <div class="card" style="height:100%">
          <h3>Execution Sequence</h3>
          <div class="steps">
            <div class="step">
              <div class="step-num">1</div>
              <div class="step-body">
                <h4>GitHub PR</h4>
                <p class="mono">weaviate/partner-integration-examples</p>
                <p>PR title: "HUF coherence adapter for Weaviate multi-tenant HOT/COLD state governance"</p>
              </div>
            </div>
            <div class="step">
              <div class="step-num">2</div>
              <div class="step-body">
                <h4>Slack Outreach</h4>
                <p>Weaviate Community #integrations ‚Äî share PR link + 3-sentence pitch</p>
              </div>
            </div>
            <div class="step">
              <div class="step-num">3</div>
              <div class="step-body">
                <h4>Email to Erika Shorten</h4>
                <p>Subject: "HUF √ó Weaviate ‚Äî HOT/COLD coherence governance pilot"</p>
              </div>
            </div>
            <div class="step">
              <div class="step-num">4</div>
              <div class="step-body">
                <h4>5‚Äì7 Day Follow-Up</h4>
                <p>Demo invite with 15-minute live run on real Weaviate tenant data</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

</div>

<footer>
  <span>HUF v1.2.1 ‚Äî Peter Higgins ‚Äî PeterHiggins19/huf_core_github_v1.1.8_no_inputs</span>
  <span class="brand">WEAVIATE PARTNER PACKAGE</span>
</footer>

</body>
</html>
